#!/usr/bin/env ruby

puts '== Instalando dependÃªncias =='
system 'gem install bundler --conservative'
system('bundle check') || system('bundle install')

require 'sqlite3'

puts "\n== Preparando banco de dados =="

begin
  db = SQLite3::Database.open "/home/luciane/ibge_nomes_populares_com_bd/db/database.db"
  db.execute <<~SQL
    CREATE TABLE Estados(
      id integer,
      sigla varchar(255),
      nome varchar(255)
    ); 
  SQL


# Execute inserts with parameter markers
db.execute("INSERT INTO estados (id, sigla, nome) 
            VALUES (?, ?, ?)", [@id, @sigla, @nome])


rescue SQLite3::Exception => e
  puts e
ensure
  db.close if db
end
